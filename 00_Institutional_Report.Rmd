---
title: "Institution Report: SWiMS 2024 Data"
author: "actionuni Survey Team"
date: "`r Sys.Date()`"
params:
  object.inst: "Default"
output:
  pdf_document:
    toc: true
    toc_depth: 3
    keep_tex: true
    fig_caption: false
# bibliography: references.bib 
classoption: landscape
geometry: top=1.5cm, bottom=1.5cm, left=1cm, right=1cm
header-includes:
  - \usepackage{graphicx}
  - \usepackage{fancyhdr}
  - \pagestyle{fancy}
  # - \fancyhead[L]{\includegraphics[width=1.5cm]{actionuni_logo_klein.png}}
  - \fancyhead[C]{}
  - \fancyhead[R]{SWiMS 2024 Institution Report}
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = F, warning = FALSE, message = FALSE,
                      out.width = "80%",
                      fig.width = 16,        
                      fig.height = 12,   
                      fig.align = 'center', 
                      fig.pos = 'H',
                      dpi = 300)
library(tidyverse)
library(kableExtra)
library(ggplot2)
library(readxl)
library(dplyr)
library(ggpattern)
```

```{r load-data, include=FALSE}
rm(list = ls())
# Load data
load("../data/SWiMS2024_Data_2025-03-25.RData") # ToDo: wir müssen unbedingt drauf achten dass alles nutzbar ist für beide ich kann data cleaningn icht nutzen weil mir ien objekt fehlt
source("99_helpers.R")


# Set target institution index manually
target_index <- 4  # Change this value to select the institution
institution_labels <- strsplit(codebook[codebook$VarName %in% "institution","Labels"],"//")[[1]]
target_institution <- institution_labels[target_index]
remaining_institutions <- setdiff(institution_labels, target_institution)

```

# Introduction

The **SWiMS 2024 Survey** explores the mental health and well-being of mid-level academic staff (e.g., doctoral researchers, scientific associates, postdocs, and other scientific staff) in Switzerland. The goal is to identify problems and areas for improvement in working conditions and research environments. This report focuses on the institution **`r target_institution`**, comparing its responses to those from other institutions.

---
  
# Sample Description
  
## Response Rate

```{r}

institution_counts <- dat %>%
  group_by(inst) %>%
  summarise(count = n()) %>%
  filter(count > 10)

institution_counts <- institution_counts %>%
  left_join(dat.meta %>% select(Name, Members), by = c("inst" = "Name")) # add member numbers
institution_counts$response_rate <- institution_counts$count/institution_counts$Members



```

`r institution_counts[institution_counts$inst %in% target_institution,"count"]` responses were collected from `r target_institution` with a total number of members estimated at `r institution_counts[institution_counts$inst %in% target_institution,"Members"]` (taken from the actionuni reports on memberships), corresponding to a participation rate of `r round(institution_counts[institution_counts$inst %in% target_institution,"response_rate"]*100,1)`%.


## Demographics 
  
The figures below summarize the key demographic characteristics of all parttaking institutions.

### Age

```{r age}
swims.plot.distribution("age", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)
```

### Gender

```{r gender}
swims.plot.distribution("Gender", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)
```

### Research Discipline

```{r }
swims.plot.distribution("Discipline", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)

```

### Position Type

```{r }
swims.plot.distribution("mainPosition", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)
```

### Funding soruce

```{r }
swims.plot.distribution("funding", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)
```


### Residence status

```{r }
swims.plot.distribution("residenceStatus", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)
```

### Care work

```{r}
swims.plot.distribution("Carework", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)
```
\newpage
### Other demographic variables

These variables will not be used for group comparisons later, thus the name "other".

#### Employment Status

```{r }
swims.plot.distribution("employmentStatus", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)
```

\newpage
#### Employment Percentage

```{r}
swims.plot.distribution("workloadMainjob", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)
```

\newpage
#### Additional Non-Academic Job

```{r}
swims.plot.distribution("nonacademicJob", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)

```

\newpage
# Mental Health

## General Mental Health

- overall distribution
```{r}
swims.plot.distribution("mentalHealth", 
                        institution = target_institution, 
                        font_size = 16,
                        annoFontSize = 6)
```



### General Mental Health by Age

```{r}
debugonce(swims.plot.distribution)
swims.plot.distribution("mentalHealth", 
                        institution = target_institution, 
                        divider = "Age",
                        font_size = 16,
                        annoFontSize = 6)
```

### General Mental Health by Gender

```{r}
swims.plot.distribution("mentalHealth", 
                        institution = target_institution, 
                        divider = "Gender",
                        font_size = 16,
                        annoFontSize = 6)
```

### General Mental Health by Research Discipline

```{r}
swims.plot.distribution("mentalHealth", 
                        institution = target_institution, 
                        divider = "Discipline",
                        font_size = 16,
                        annoFontSize = 6)
```

### General Mental Health by Position Type

```{r}
swims.plot.distribution("mentalHealth", 
                        institution = target_institution, 
                        divider = "Position",
                        font_size = 16,
                        annoFontSize = 6)
```


### General Mental Health by Care Work

```{r}
swims.plot.distribution("mentalHealth", 
                        institution = target_institution, 
                        divider = "Carework",
                        font_size = 16,
                        annoFontSize = 6)
```

<!-- ## Depression -->

<!-- ## Burnout -->

<!-- ## Awarenes Resources -->

<!-- # Job Satisfaction -->

<!-- ## Quitting Intentions -->

<!-- # Stressors -->

<!-- ## System -->

<!-- ## Supervisor -->

<!-- ## Colleagues -->

<!-- ## Self-Management -->

<!-- ## Private -->

<!-- # Supervisor -->

<!-- # Institution -->

<!-- # Work-Group -->

<!-- # Discrimination -->

<!-- # Questionable Research Practices -->





<!-- Job satisfaction item by @dolbier_reliability_2005. -->

<!-- ```{r job satisfaction} -->

<!-- swims.plot.distribution(var = "jobSatisfaction", institution = target_institution) -->



<!-- ``` -->

<!-- ## Supervisor -->

<!-- ```{r supervisor, fig.height = 7} -->


<!-- swims.plot.multibar(var = "supervisor", institution = target_institution, colors_set = "RdYlGn") -->


<!-- ``` -->

<!-- ## Discrimination -->

<!-- ```{r} -->
<!-- swims.plot.multibar(var = "discrimination", institution = target_institution) -->

<!-- ``` -->

<!-- ## Discrimination -->

<!-- ```{r} -->
<!-- swims.plot.multibar(var = "discrimination", institution = target_institution) -->

<!-- ``` -->


<!-- ```{r} -->

<!-- swims.plot.aggregation(var = "discrimination_type", institution = target_institution, showCount = T) # showCount = T only for testing -->

<!-- ``` -->

<!-- ## Questionable Research Practices -->


<!-- ```{r} -->
<!-- swims.plot.multibar(var = "qrp", institution = target_institution, fill_color_set = rev(c("gray48","brown","orange","forestgreen","red"))) -->

<!-- ``` -->


<!-- ```{r} -->

<!-- #swims.plot.aggregation(var = "qrp_pressure", institution = target_institution, showCount = T) # showCount = T only for testing -->

<!-- ``` -->

<!-- # Results by Age -->

<!-- ```{r byAge, fig.height= 10, fig.width= 12} -->
<!-- swims.plot.multibar(var = "institution", institution = target_institution, colors_set = "RdYlGn", divider = "age", ncol_plot = 2) -->

<!-- ``` -->

<!-- # Appendix -->

<!-- ## Codebook -->

<!-- Detailed variable names, item formulations, etc. can be found in the codebook [link] -->

<!-- # References -->
