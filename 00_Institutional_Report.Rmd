---
title: "Institution Report: SWiMS 2024 Data"
author: "actionuni Survey Team"
date: "`r Sys.Date()`"
params:
  object.inst: "Default"
output:
  pdf_document:
    toc: true
    toc_depth: 3
# bibliography: references.bib 
classoption: landscape
header-includes:
  - \usepackage{graphicx}
  - \usepackage{fancyhdr}
  - \pagestyle{fancy}
  - \fancyhead[L]{\includegraphics[width=1.5cm]{actionuni_logo_klein.png}}
  - \fancyhead[C]{}
  - \fancyhead[R]{SWiMS 2024 Institution Report}
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = F, warning = FALSE, message = FALSE,
                      out.width = "100%", 
                      dpi = 300)
library(tidyverse)
library(kableExtra)
library(ggplot2)
library(readxl)
library(dplyr)
library(ggpattern)
```

```{r load-data, include=FALSE}
rm(list = ls())
# Load data
load("../data/SWiMS2024_Data_2025-03-24.RData") # ToDo: wir müssen unbedingt drauf achten dass alles nutzbar ist für beide ich kann data cleaningn icht nutzen weil mir ien objekt fehlt
source("99_helpers.R")


# Set target institution index manually
target_index <- 4  # Change this value to select the institution
institution_labels <- strsplit(codebook[codebook$VarName %in% "institution","Labels"],"//")[[1]]
target_institution <- institution_labels[target_index]
remaining_institutions <- setdiff(institution_labels, target_institution)

```

# TODO

- bei plots einbauen, dass kleine zellgrössen nicht geplotted / getabled werden
- wieso schneidet es die plots rechts ab? -> Zoran
- 0 as answer category set to NA -> data_ceaning script -> Timon
- discrimination color manual -> Timon
- levels discrimination aggreagation plot, order -> Zoran
- aggregation plot minor grids, einheitlich --> Zoran
- fontsize of divider -_> Zoran
- trenn-space bei mutlibar institution mit divider -> Zoran

Big stuff:

- blanko struktur vom RMD -> Timon
- Institutional -> Zoran
- National <- Timon


# Introduction

The **SWiMS 2024 Survey** explores the mental health and well-being of mid-level academic staff (e.g., doctoral researchers, scientific associates, postdocs, and other scientific staff) in Switzerland. The goal is to identify problems and areas for improvement in working conditions and research environments. This report focuses on the institution **`r target_institution`**, comparing its responses to those from other institutions.

---
  
# Sample Description
  
## Response Rate

```{r}

institution_counts <- dat %>%
  group_by(inst) %>%
  summarise(count = n()) %>%
  filter(count > 10)

institution_counts <- institution_counts %>%
  left_join(dat.meta %>% select(Name, Members), by = c("inst" = "Name")) # add member numbers
institution_counts$response_rate <- institution_counts$count/institution_counts$Members



```

`r institution_counts[institution_counts$inst %in% target_institution,"count"]` responses were collected from `r target_institution` with a total number of members estimated at `r institution_counts[institution_counts$inst %in% target_institution,"Members"]` (taken from the actionuni reports on memberships), corresponding to a participation rate of `r round(institution_counts[institution_counts$inst %in% target_institution,"response_rate"]*100,1)`%.


## Demographics 
  
The figures below summarize the key demographic characteristics of all parttaking institutions.

### Age

```{r age}
swims.plot.distribution("age", institution = target_institution)
```

### Gender

```{r gender}
swims.plot.distribution("gender", institution = target_institution)
```

### Research Discipline

```{r }
swims.plot.distribution("researchDiscipline", institution = target_institution) 

```

### Position Type

```{r }
swims.plot.distribution("mainPosition", institution = target_institution) # + 
    #scale_x_discrete(labels = function(x) str_wrap(x, width = 23))   # Apply text wrapping

```

### Funding soruce

```{r }
swims.plot.distribution("funding", institution = target_institution)
```


### Residence status

```{r }
swims.plot.distribution("residenceStatus", institution = target_institution)
```

### Care work

```{r , fig.height=3}
swims.plot.distribution("carework", institution = target_institution)
```

### Other demographic variables

These variables will not be used for group comparisons later, thus the name "other".

#### Employment Status
<br>

```{r }

swims.plot.distribution("employmentStatus", institution = target_institution)

```


#### Employment Percentage


```{r}

swims.plot.distribution("workloadMainjob", institution = target_institution)

```


#### Additional Non-Academic Job  
<br>

```{r, fig.height= 3 }

swims.plot.distribution("nonacademicJob", institution = target_institution)

```

# Mental Health

## General Mental Health

- overall distribution
```{r}

```



### General Mental Health by Age

```{r}

```

### General Mental Health by Gender

```{r}

```

### General Mental Health by Research Discipline

```{r}

```

### General Mental Health by Funding Source (national only)

```{r}

```

### General Mental Health by Position Type

```{r}

```


### General Mental Health by Care Work

```{r}

```


### General Mental Health by Residence (national only)

```{r}

```

## Depression

## Burnout

## Awarenes Resources 

# Job Satisfaction 

## Quitting Intentions

# Stressors

## System

## Supervisor

## Colleagues

## Self-Management

## Private

# Supervisor

# Institution 

# Work-Group

# Discrimination

# Questionable Research Practices





Job satisfaction item by @dolbier_reliability_2005. 

```{r job satisfaction}

swims.plot.distribution(var = "jobSatisfaction", institution = target_institution)



```

## Supervisor

```{r supervisor, fig.height = 7}


swims.plot.multibar(var = "supervisor", institution = target_institution, colors_set = "RdYlGn")


```

## Discrimination 

```{r}
swims.plot.multibar(var = "discrimination", institution = target_institution)

```

## Discrimination

```{r}
swims.plot.multibar(var = "discrimination", institution = target_institution)

```


```{r}

swims.plot.aggregation(var = "discrimination_type", institution = target_institution, showCount = T) # showCount = T only for testing

```

## Questionable Research Practices


```{r}
swims.plot.multibar(var = "qrp", institution = target_institution, fill_color_set = rev(c("gray48","brown","orange","forestgreen","red")))

```


```{r}

#swims.plot.aggregation(var = "qrp_pressure", institution = target_institution, showCount = T) # showCount = T only for testing

```

# Results by Age
  
```{r byAge, fig.height= 10, fig.width= 12}
swims.plot.multibar(var = "institution", institution = target_institution, colors_set = "RdYlGn", divider = "age", ncol_plot = 2)

```

# Appendix 

## Codebook

Detailed variable names, item formulations, etc. can be found in the codebook [link]

# References 
